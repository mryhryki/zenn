---
title: "JavaScriptã§èƒŒæ™¯è‰²ã‹ã‚‰æ–‡å­—è‰²ã‚’å°Žå‡ºã™ã‚‹"
emoji: "ðŸšš"
type: "tech"
topics: ["JavaScript"]
published: true
---
â€»ã“ã®è¨˜äº‹ã¯[ã¯ã¦ãªãƒ–ãƒ­ã‚°](https://hyiromori.hateblo.jp/entry/2020/11/12/182643)ã‹ã‚‰å¼•ã£è¶Šã—ã¾ã—ãŸ

## ã¯ã˜ã‚ã«

ã“ã®ãƒ–ãƒ­ã‚°ãƒã‚¹ãƒˆã¯ GitHub ã®ãƒ©ãƒ™ãƒ«ã®ã‚ˆã†ã«ã€èƒŒæ™¯è‰²ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè‡ªç”±ã«æ±ºã‚ã¦ã€ä¸­ã«è¡¨ç¤ºã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã®è‰²ã‚’è¨ˆç®—ã§å°Žå‡ºã™ã‚‹ã€ã¨ã„ã†ã“ã¨ã‚’å®Ÿè£…ã™ã‚‹æ™‚ã«èª¿ã¹ãŸã“ã¨ã®ãƒ¡ãƒ¢ã§ã™ã€‚

![capture](https://i.gyazo.com/bc937394a678180db13034e0fe38135d.png)

ï¼ˆ2020-11-23 è¿½è¨˜ï¼‰
å‰åŠã¯YUVã¨ã„ã†è‰²ç©ºé–“ã®è¼åº¦æƒ…å ±ã«å¤‰æ›ã—ã¦ã—ãã„å€¤ã§åˆ¤æ–­ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¦ã„ã¾ã™ãŒã€ã“ã¡ã‚‰ã¯ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã®è¦³ç‚¹ã‹ã‚‰ã‚ã¾ã‚Šã‚ªã‚¹ã‚¹ãƒ¡ã§ãã¾ã›ã‚“ã€‚
å®Ÿè£…ã™ã‚‹éš›ã¯ã€Œã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚’è€ƒæ…®ã—ã¦æ–‡å­—è‰²ã‚’æ±‚ã‚ã¦ã¿ã‚‹ã€ã®ç« ã‚’å‚è€ƒã«ã—ã¦ã„ãŸã ãã®ãŒã‚ªã‚¹ã‚¹ãƒ¡ã§ã™ã€‚



## èƒŒæ™¯è‰²ã®æŒ‡å®šã‚’æ±ºã‚ã‚‹

è‰²ã®æŒ‡å®šã¯æ§˜ã€…ã‚ã‚Šã¾ã™ãŒã€CSS ã§ã‚ˆãä½¿ã†ã®ã¯RGBã®æŒ‡å®šã ã¨æ€ã„ã¾ã™ã€‚

ä»Šå›žã¯RDBã«èƒŒæ™¯è‰²ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ã®ã§ã€16é€²æ•°6æ¡ã®RGBå€¤ã«å›ºå®šã™ã‚‹ã¨æ‰±ã„ã‚„ã™ãã†ãªã®ã§ã€èƒŒæ™¯è‰²ã¯ã“ã®æŒ‡å®šæ–¹æ³•ã«æ±ºã‚ã¾ã—ãŸã€‚

```css
/* èƒŒæ™¯è‰²ã¨æ–‡å­—è‰²ã‚’16é€²æ•°6æ¡ã®RGBå€¤ã§æŒ‡å®šã™ã‚‹ä¾‹ */
background-color: #000000;
color: #ffffff;
```



## ä½•ã‚’åŸºæº–ã«æ–‡å­—è‰²ã‚’åˆ¤æ–­ã™ã‚‹ã®ã‹

ä½•ã‚‚åˆ†ã‹ã‚‰ãªã‹ã£ãŸã®ã§ã€ã¨ã‚Šã‚ãˆãšRGBã®å€¤ãã‚Œãžã‚Œã‚’åˆè¨ˆã—ã¦ã—ãã„å€¤ã§åˆ¤å®šã™ã‚Œã°ã§ããŸã‚Šã™ã‚‹ã®ã‹ãªãƒ¼ã€ã¨æ€ã£ã¦è©¦ã—ã¦ã¿ãŸã‚“ã§ã™ãŒã€ã©ã†ã‚‚ã†ã¾ãã„ãã¾ã›ã‚“ã€‚

ç°¡å˜ã«è¨€ã£ã¦ã—ã¾ãˆã°ã€Œæ˜Žã‚‹ã„è‰²ã€ã®æ™‚ã¯é»’ã€ã€Œæš—ã„è‰²ã€ã®æ™‚ã¯ç™½ã¨åˆ¤å®šã™ã‚‹ã ã‘ãªã®ã§ã™ãŒã€æ˜Žã‚‹ã„ã‹æš—ã„ã‹ã¯RGBã®ã¾ã¾ã§ã¯åˆ¤å®šã™ã‚‹ã“ã¨ãŒã§ããªã„ã‚ˆã†ã§ã™ã€‚

ã¨ã„ã†ã‚ã‘ã§ã„ã‚ã„ã‚èª¿ã¹ã¦ã„ã‚‹ã¨ã€YUVã¨ã„ã†è‰²è¡¨ç¾ã®ã†ã¡ã®Y(è¼åº¦)ã‚’ä½¿ã†ã¨è‰¯ã•ãã†ã€ã¨ã„ã†ã¨ã“ã‚ã¾ã§ãŸã©ã‚Šç€ãã¾ã—ãŸã€‚

[PHP ã§èƒŒæ™¯è‰²ã«å¯¾ã—ã¦è¦‹ãˆã‚„ã™ã„æ–‡å­—è‰²ã¯ç™½ã‹é»’ã‹ã‚’åˆ¤åˆ¥ã™ã‚‹ | Thought is free](https://thk.kanzae.net/net/itc/t7110/)



## RGBã‚’Y(è¼åº¦)ã«å¤‰æ›ã™ã‚‹

Wikipedia ã‚’è¦‹ã‚‹ã¨æ™®é€šã«è¨ˆç®—å¼ãŒè¼‰ã£ã¦ã„ã¾ã—ãŸã€‚

![capture](https://i.gyazo.com/bae0b63cb7ec30c6bfb15b24130ed0f1.png)
[YUV - Wikipedia](https://ja.wikipedia.org/wiki/YUV)

JavaScript ã ã¨ã“ã‚“ãªæ„Ÿã˜ã§æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚

```javascript
// èƒŒæ™¯è‰²(16é€²æ•°6æ¡ã®RGBå€¤)
const backgroudColor = 'abcdef';

// RGBã‚’Y(è¼åº¦)ã«å¤‰æ›
const brightness = 
    (parseInt(backgroudColor.substr(0, 2), 16) * 0.299) + // Red
    (parseInt(backgroudColor.substr(2, 2), 16) * 0.587) + // Green 
    (parseInt(backgroudColor.substr(4, 2), 16) * 0.114)   // Blue
```

## ã—ãã„å€¤ã‚’æ±ºã‚ã‚‹

ã“ã‚Œã«é–¢ã—ã¦ã¯å®Ÿéš›ã«è©¦ã—ã¦ã¿ã¦ç¢ºèªã—ã¦ã¿ã¾ã—ãŸã€‚

- Preview: [èƒŒæ™¯è‰²ã‚’ãƒ™ãƒ¼ã‚¹ã«æ–‡å­—è‰²ã‚’åˆ¤å®šã—ã¦ã¿ã‚‹](https://gistpreview.github.io/?4bd2acc20362e20546f5cf9009237239/scratch.html)
- Gist: [èƒŒæ™¯è‰²ã‚’ãƒ™ãƒ¼ã‚¹ã«æ–‡å­—è‰²ã‚’åˆ¤å®šã—ã¦ã¿ã‚‹](https://gist.github.com/hyiromori/4bd2acc20362e20546f5cf9009237239)

![capture](https://i.gyazo.com/8817c6b6212fd752c8adbbb73ec88ba9.png)

(â€» [gistpreview](https://github.com/gistpreview/gistpreview.github.io/)  ã‚’ä½¿ã†ã¨ Gist ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒç°¡å˜ã«ã§ãã¦ä¾¿åˆ©ã§ã™)

ã„ãã¤ã‹è©¦ã—ãŸçµæžœ `140` ã§å…¨ä½“çš„ã«å•é¡Œãªã•ãã†ã ã£ãŸã®ã§ã€`140` ã‚’å¢ƒã«æ–‡å­—è‰²ã‚’å¤‰æ›´ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚

```javascript
const brightness = Math.floor((parseInt(red, 16) * 0.299) + (parseInt(green, 16) * 0.587) + (parseInt(blue, 16) * 0.114))
const color = brightness >= 140 ? '000000' : 'FFFFFF'
```

ã‚ã¨ã¯ã“ã®çµæžœã‚’ã‚¹ã‚¿ã‚¤ãƒ«ã«é©ç”¨ã™ã‚Œã°OKã§ã™ï¼



## ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚’è€ƒæ…®ã—ã¦æ–‡å­—è‰²ã‚’æ±‚ã‚ã¦ã¿ã‚‹ï¼ˆ2020-11-23 è¿½è¨˜ï¼‰

ã‚³ãƒ¡ãƒ³ãƒˆã§ã€[ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¦³ç‚¹ã®ã‚³ãƒ¡ãƒ³ãƒˆ](https://zenn.dev/hyiromori/articles/hatena-20201112-182643#comment-af0852b1344a1d43d860)ã‚’é ‚ãã¾ã—ãŸã€‚
è¦‹ãŸç›®ã ã‘ã§åˆ¤å®šã—ã¦ã„ã¾ã—ãŸãŒã€ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”ã‚’è€ƒæ…®ã—ã¦åˆ¤å®šã—ãŸã»ã†ãŒã‚ˆã‚Šè‰¯ã„çµæžœãŒå¾—ã‚‰ã‚Œãã†ãªã®ã§ã€è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚

ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã‚³ãƒ¼ãƒ‰ã‚’å«ã‚ã€å…¨éƒ¨æŽ²è¼‰ã™ã‚‹ã®ã¯é‡ãŒå¤šã„ã®ã§ [Gist](https://gist.github.com/hyiromori/29804334efd00129447878b67bff9772) ã«ã¾ã¨ã‚ã¾ã—ãŸã€‚
è©³ç´°ã‚’è©³ã—ãè¦‹ãŸã„æ–¹ã¯ã“ã¡ã‚‰ã‚‚è¦‹ã¦ã¿ã¦ãã ã•ã„ã€‚

ä»Šå›žè©¦ã—ãŸã‚„ã‚Šæ–¹ã¨ã—ã¦ã¯ã€èƒŒæ™¯è‰²ã«å¯¾ã—ã¦ç™½ã¨é»’ã®æ–‡å­—è‰²ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”ã‚’ãã‚Œãžã‚Œæ±‚ã‚ã¦ã€ã‚ˆã‚Šé«˜ã„ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”ã®ã‚‚ã®ã‚’æŽ¡ç”¨ã™ã‚‹ã€ã¨ã„ã†æ–¹æ³•ã‚’ã¨ã£ã¦ã¿ã¾ã—ãŸã€‚
è¨ˆç®—æ–¹æ³•ã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒè¦–ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚

- [Javascriptã§WC3ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆè¨ˆç®—å¼ã‚’æ›¸ã„ã¦ã¿ã‚‹|æ„è­˜ã®é«˜ã„æ™‚ã«é›‘è¨˜](https://lifehackdev.com/ZakkiBlog/articles/detail/web15)
- [è‰²ã¨ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã®è©±ï½œtwenty nineï½œnote](https://note.com/twentynine/n/nd79c8dd275d9)

ãªãŠã€ã“ã®æ¤œè¨¼ã§ã¯è‰²ã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆä¾‹: `{red: 0, green: 128, blue: 255}`ï¼‰ã§æ‰±ã£ã¦ã„ã‚‹ã®ã§ã”æ³¨æ„ãã ã•ã„ã€‚
ï¼ˆæ–‡å­—åˆ—ã§æ‰±ã†ã¨è‰²ã€…é¢å€’ã ã£ãŸã®ã§ãƒ»ãƒ»ãƒ»ï¼‰

### ç›¸å¯¾è¼åº¦ã‚’æ±‚ã‚ã‚‹

W3Cã®å®šç¾©ã§ã¯ç›¸å¯¾è¼åº¦ã«å¤‰æ›ã—ã¦ã‹ã‚‰ã€ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”ã‚’è¨ˆç®—ã™ã‚‹ã‚ˆã†ã§ã™ã€‚
ã¾ãšã¯ç›¸å¯¾è¼åº¦ã‚’æ±‚ã‚ã¾ã™ã€‚
JavaScript ã®ã‚³ãƒ¼ãƒ‰ã ã¨ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```javascript
// äººé–“ã®è¦–è¦šç‰¹æ€§ã«ã‚ã£ãŸè¼åº¦ã«å¤‰æ›ã™ã‚‹
const getRGBForCalculateLuminance = (_color) => {
  const color = _color / 255
  if (color <= 0.03928) {
    return color / 12.92;
  } else {
    return Math.pow(((color + 0.055) / 1.055), 2.4);
  }
}

// ç›¸å¯¾è¼åº¦ã«å¤‰æ›ã™ã‚‹
const getRelativeLuminance = (color) => {
  const {red, green, blue} = color
  const R = getRGBForCalculateLuminance(red);
  const G = getRGBForCalculateLuminance(green);
  const B = getRGBForCalculateLuminance(blue);
  return 0.2126 * R + 0.7152 * G + 0.0722 * B;
}
```

### ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”ã‚’æ±‚ã‚ã‚‹

ç›¸å¯¾è¼åº¦ã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ã€ï¼’ã®è‰²ï¼ˆèƒŒæ™¯è‰²ã¨æ–‡å­—è‰²ï¼‰ã‹ã‚‰ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”ã‚’æ±‚ã‚ã¾ã™ã€‚
JavaScript ã®ã‚³ãƒ¼ãƒ‰ã ã¨ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```javascript
const getContrastRatio = (color1, color2) => {
  const luminance1 = getRelativeLuminance(color1);
  const luminance2 = getRelativeLuminance(color2);
  const bright = Math.max(luminance1, luminance2);
  const dark = Math.min(luminance1, luminance2);
  return (bright + 0.05) / (dark + 0.05);
}
```

### ç™½ã¨é»’ã®æ–‡å­—è‰²ã®ã©ã¡ã‚‰ãŒé©åˆ‡ã‹ã‚’åˆ¤å®šã™ã‚‹

ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”ã‚’ç®—å‡ºã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ã€å¾Œã¯ç™½ã¨é»’ã®ã©ã¡ã‚‰ã®æ–‡å­—è‰²ãŒã‚ˆã‚Šã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”ãŒé«˜ã„ã‹ã‚’åˆ¤å®šã™ã‚Œã°ã€é©åˆ‡ãªæ–‡å­—è‰²ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚
JavaScript ã®ã‚³ãƒ¼ãƒ‰ã ã¨ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚


```javascript
const getFontColor = (color) => {
  const darkRatio = getContrastRatio(color, BLACK)
  const lightRatio = getContrastRatio(color, WHITE)
  return lightRatio < darkRatio ? WHITE : BLACK
}
```

### ç”»é¢ä¸Šã§ç¢ºèªã—ã¦ã¿ã‚‹

å®Ÿéš›ã«ç”»é¢ã§è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚
ãŸã—ã‹ã«YUVã§ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”ãŒä½Žã„éƒ¨åˆ†ã¯è¦‹ã‚„ã™ããªã£ãŸã¨æ€ã„ã¾ã™ã€‚

- Preview: [èƒŒæ™¯è‰²ã‹ã‚‰ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”ã‚’è€ƒæ…®ã—ã¦æ–‡å­—è‰²ã‚’åˆ¤å®šã—ã¦ã¿ã‚‹](https://gistpreview.github.io/?29804334efd00129447878b67bff9772/index.html)

ã€ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”ã§ã®ç®—å‡ºãªæ–¹æ³•ã€‘
![Contrast Ratio](https://i.gyazo.com/9264ca35043e3087cedd3df344e32bf5.png)

ã€YUVã§ã®ç®—å‡ºãªæ–¹æ³•ã€‘
![YUV](https://i.gyazo.com/007c482372e7ca6f7055664054492d67.png")

### ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”ã§ç®—å‡ºã™ã‚‹æ–¹æ³•ã¾ã¨ã‚

YUVã®è©±ã¯ãªããªã£ã¦ã—ã¾ã„ã¾ã—ãŸãŒã€ã“ã¡ã‚‰ã®æ–¹ãŒçµæžœã¨ã—ã¦ã¯è‰¯ã•ãã†ã§ã™ã­ã€‚
ã¡ãªã¿ã«ã€å‰åŠéƒ¨åˆ†ã§ç´¹ä»‹ã—ãŸæ–¹æ³•ã ã¨ `3,670,885/16,777,216è‰²` (ç´„21.9%) ãŒã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”4.5æœªæº€ã€æœ€å°ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”ãŒ `1.58` ã§ã—ãŸã€‚
ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£çš„ã«ã‚ã¾ã‚Šè‰¯ã„æ–¹æ³•ã§ã¯ãªã‹ã£ãŸã§ã™ðŸ™‡â€â™‚ï¸



## ãŠã‚ã‚Šã«

YUVã¨ã„ã†ã®ã‚’ä»Šå›žèª¿ã¹ã¦åˆã‚ã¦çŸ¥ã‚Šã¾ã—ãŸãŒã€ã“ã†ã„ã†ä½¿ã„æ–¹ã®ã¨ãã«ä¾¿åˆ©ã§ã™ã­ã€‚
ä¼¼ãŸã‚ˆã†ãªå®Ÿè£…ãŒå¿…è¦ã«ãªã£ãŸéš›ã¯å‚è€ƒã«ã—ã¦ã¿ã¦ãã ã•ã„ã€‚
ã¾ãŸã€ã“ã†ã„ã†åˆ¤å®šã®ä»•æ–¹ã®ã»ã†ãŒè‰¯ã„ã¨ã„ã†ã®ã‚’ã”å­˜ã˜ã®æ–¹ãŠã‚‰ã‚Œã¾ã—ãŸã‚‰ã€æ•™ãˆã¦ã„ãŸã ã‘ã‚‹ã¨å¬‰ã—ã„ã§ã™ã€‚



## å‚è€ƒ

- [YUV - Wikipedia](https://ja.wikipedia.org/wiki/YUV)
- [PHP ã§èƒŒæ™¯è‰²ã«å¯¾ã—ã¦è¦‹ãˆã‚„ã™ã„æ–‡å­—è‰²ã¯ç™½ã‹é»’ã‹ã‚’åˆ¤åˆ¥ã™ã‚‹ | Thought is free](https://thk.kanzae.net/net/itc/t7110/)
